var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function f(){return l(" ")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let y;function h(t){y=t}function g(t){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(t)}const b=[],$=[],x=[],k=[],v=Promise.resolve();let j=!1;function w(t){x.push(t)}let _=!1;const O=new Set;function E(){if(!_){_=!0;do{for(let t=0;t<b.length;t+=1){const e=b[t];h(e),F(e.$$)}for(h(null),b.length=0;$.length;)$.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];O.has(e)||(O.add(e),e())}x.length=0}while(b.length);for(;k.length;)k.pop()();j=!1,_=!1,O.clear()}}function F(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(w)}}const C=new Set;function S(t,e){-1===t.$$.dirty[0]&&(b.push(t),j||(j=!0,v.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function N(c,a,i,u,l,f,p=[-1]){const d=y;h(c);const m=a.props||{},g=c.$$={fragment:null,ctx:null,props:f,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:p,skip_bound:!1};let b=!1;if(g.ctx=i?i(c,m,((t,e,...n)=>{const r=n.length?n[0]:e;return g.ctx&&l(g.ctx[t],g.ctx[t]=r)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](r),b&&S(c,t)),e})):[],g.update(),b=!0,r(g.before_update),g.fragment=!!u&&u(g.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);g.fragment&&g.fragment.l(t),t.forEach(s)}else g.fragment&&g.fragment.c();a.intro&&(($=c.$$.fragment)&&$.i&&(C.delete($),$.i(x))),function(t,n,c){const{fragment:a,on_mount:i,on_destroy:s,after_update:u}=t.$$;a&&a.m(n,c),w((()=>{const n=i.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(w)}(c,a.target,a.anchor),E()}var $,x;h(d)}var A="%[a-f0-9]{2}",I=new RegExp(A,"gi"),R=new RegExp("("+A+")+","gi");function U(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),r=t.slice(e);return Array.prototype.concat.call([],U(n),U(r))}function L(t){try{return decodeURIComponent(t)}catch(r){for(var e=t.match(I),n=1;n<e.length;n++)e=(t=U(e,n).join("")).match(I);return t}}var B,T=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},n=R.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=L(n[0]);r!==n[0]&&(e[n[0]]=r)}n=R.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),c=0;c<o.length;c++){var a=o[c];t=t.replace(new RegExp(a,"g"),e[a])}return t}(t)}},q=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]},z=(function(t,e){function n(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function r(t,e){return e.encode?e.strict?encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)):encodeURIComponent(t):t}function o(t,e){return e.decode?T(t):t}function c(t){return Array.isArray(t)?t.sort():"object"==typeof t?c(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function a(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function i(t){const e=(t=a(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function s(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function u(t,e){n((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,n,r)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===r[t]&&(r[t]={}),r[t][e[1]]=n):r[t]=n};case"bracket":return(t,n,r)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==r[t]?r[t]=[].concat(r[t],n):r[t]=[n]:r[t]=n};case"comma":case"separator":return(e,n,r)=>{const c="string"==typeof n&&n.includes(t.arrayFormatSeparator),a="string"==typeof n&&!c&&o(n,t).includes(t.arrayFormatSeparator);n=a?o(n,t):n;const i=c||a?n.split(t.arrayFormatSeparator).map((e=>o(e,t))):null===n?n:o(n,t);r[e]=i};default:return(t,e,n)=>{void 0!==n[t]?n[t]=[].concat(n[t],e):n[t]=e}}}(e),a=Object.create(null);if("string"!=typeof t)return a;if(!(t=t.trim().replace(/^[?#&]/,"")))return a;for(const n of t.split("&")){let[t,c]=q(e.decode?n.replace(/\+/g," "):n,"=");c=void 0===c?null:["comma","separator"].includes(e.arrayFormat)?c:o(c,e),r(o(t,e),c,a)}for(const t of Object.keys(a)){const n=a[t];if("object"==typeof n&&null!==n)for(const t of Object.keys(n))n[t]=s(n[t],e);else a[t]=s(n,e)}return!1===e.sort?a:(!0===e.sort?Object.keys(a).sort():Object.keys(a).sort(e.sort)).reduce(((t,e)=>{const n=a[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=c(n):t[e]=n,t}),Object.create(null))}e.extract=i,e.parse=u,e.stringify=(t,e)=>{if(!t)return"";n((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const o=n=>e.skipNull&&null==t[n]||e.skipEmptyString&&""===t[n],c=function(t){switch(t.arrayFormat){case"index":return e=>(n,o)=>{const c=n.length;return void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:null===o?[...n,[r(e,t),"[",c,"]"].join("")]:[...n,[r(e,t),"[",r(c,t),"]=",r(o,t)].join("")]};case"bracket":return e=>(n,o)=>void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:null===o?[...n,[r(e,t),"[]"].join("")]:[...n,[r(e,t),"[]=",r(o,t)].join("")];case"comma":case"separator":return e=>(n,o)=>null==o||0===o.length?n:0===n.length?[[r(e,t),"=",r(o,t)].join("")]:[[n,r(o,t)].join(t.arrayFormatSeparator)];default:return e=>(n,o)=>void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:null===o?[...n,r(e,t)]:[...n,[r(e,t),"=",r(o,t)].join("")]}}(e),a={};for(const e of Object.keys(t))o(e)||(a[e]=t[e]);const i=Object.keys(a);return!1!==e.sort&&i.sort(e.sort),i.map((n=>{const o=t[n];return void 0===o?"":null===o?r(n,e):Array.isArray(o)?o.reduce(c(n),[]).join("&"):r(n,e)+"="+r(o,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[n,r]=q(t,"#");return Object.assign({url:n.split("?")[0]||"",query:u(i(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:o(r,e)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0},n);const o=a(t.url).split("?")[0]||"",c=e.extract(t.url),i=e.parse(c,{sort:!1}),s=Object.assign(i,t.query);let u=e.stringify(s,n);u&&(u=`?${u}`);let l=function(t){let e="";const n=t.indexOf("#");return-1!==n&&(e=t.slice(n)),e}(t.url);return t.fragmentIdentifier&&(l=`#${r(t.fragmentIdentifier,n)}`),`${o}${u}${l}`}}(B={exports:{}},B.exports),B.exports);function P(t){let e;return{c(){e=u("p"),e.textContent="no token"},m(t,n){i(t,e,n)},d(t){t&&s(e)}}}function G(t){let e;return{c(){e=u("p"),e.textContent="has token"},m(t,n){i(t,e,n)},d(t){t&&s(e)}}}function M(e){let n;return{c(){n=u("p"),n.textContent="No epsidode found :("},m(t,e){i(t,n,e)},p:t,d(t){t&&s(n)}}}function D(t){let e,n,r,o,c,d,y,h=t[2].name+"";return{c(){e=u("p"),n=l("Episode: "),r=l(h),o=f(),c=u("button"),c.textContent="Add to queue"},m(s,u){i(s,e,u),a(e,n),a(e,r),i(s,o,u),i(s,c,u),d||(y=p(c,"click",t[4],{once:!0}),d=!0)},p(t,e){4&e&&h!==(h=t[2].name+"")&&m(r,h)},d(t){t&&s(e),t&&s(o),t&&s(c),d=!1,y()}}}function H(e){let n,o,c,y,h,g,b,$,x,k,v,j,w,_,O,E,F;function C(t,e){return t[1]?G:P}let S=C(e),N=S(e);function A(t,e){return t[2]?D:M}let I=A(e),R=I(e);return{c(){n=u("main"),o=u("h1"),c=l("Hello "),y=l(e[0]),h=l("!"),g=f(),b=u("p"),$=l("Cool beans, token: "),x=l(e[1]),k=f(),v=u("button"),v.textContent="Login",j=f(),w=u("button"),w.textContent="Logout",_=f(),N.c(),O=f(),R.c(),d(o,"class","svelte-1tky8bj"),d(n,"class","svelte-1tky8bj")},m(t,r){i(t,n,r),a(n,o),a(o,c),a(o,y),a(o,h),a(n,g),a(n,b),a(b,$),a(b,x),a(n,k),a(n,v),a(n,j),a(n,w),a(n,_),N.m(n,null),a(n,O),R.m(n,null),E||(F=[p(v,"click",Z,{once:!0}),p(w,"click",e[3],{once:!0})],E=!0)},p(t,[e]){1&e&&m(y,t[0]),2&e&&m(x,t[1]),S!==(S=C(t))&&(N.d(1),N=S(t),N&&(N.c(),N.m(n,O))),I===(I=A(t))&&R?R.p(t,e):(R.d(1),R=I(t),R&&(R.c(),R.m(n,null)))},i:t,o:t,d(t){t&&s(n),N.d(),R.d(),E=!1,r(F)}}}function Z(){window.location.href="https://accounts.spotify.com/authorize?client_id=d88b089d3c9f4376911d9f56565849fc&scope=user-modify-playback-state&response_type=token&redirect_uri=https://richodemus.github.io/one-click-podcast/"}function J(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function a(t){try{s(r.next(t))}catch(t){c(t)}}function i(t){try{s(r.throw(t))}catch(t){c(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,i)}s((r=r.apply(t,e||[])).next())}))};let{name:o}=e,c=null,a=null;return g((()=>r(void 0,void 0,void 0,(function*(){const t=z.parse(location.hash);if(console.log("token",t.access_token),n(1,c=t.access_token),c&&window.history.replaceState({},document.title,"/"),c){const t=yield fetch("https://api.spotify.com/v1/shows/0p92p8lG4Gz8fhZvcwSMxD/episodes",{headers:{Authorization:"Bearer "+c}}).then((t=>t.json())).then((t=>t.items.map((t=>({id:t.id,name:t.name,uri:t.uri})))));console.log("episodes:",t),n(2,a=t.find((t=>t.name.includes("sammanfattning av dagens nyheter")))),console.log("wanna play:",a)}})))),t.$$set=t=>{"name"in t&&n(0,o=t.name)},[o,c,a,function(){n(1,c=null)},function(){fetch("https://api.spotify.com/v1/me/player/queue?uri="+a.uri,{method:"POST",headers:{Authorization:"Bearer "+c}})}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),N(this,t,J,H,c,{name:0})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
